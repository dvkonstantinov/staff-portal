/*!
 * Tiny Accessibility Checker Plugin
 *
 * Copyright (c) 2022 Ephox Corporation DBA Tiny Technologies, Inc.
 * Licensed under the Tiny commercial license. See https://www.tiny.cloud/legal/
 *
 * Version: 3.1.0-52
 */

!function(){"use strict";const e=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(r=a=e,(o=String).prototype.isPrototypeOf(r)||(null===(n=a.constructor)||void 0===n?void 0:n.name)===o.name)?"string":t;var r,a,o,n})(t)===e,r=e=>t=>typeof t===e,a=t("string"),o=t("object"),n=t("array"),i=r("boolean"),s=(void 0,e=>undefined===e);const l=e=>!(e=>null==e)(e),c=r("function"),u=r("number"),d=()=>{},p=e=>()=>e,h=e=>e,m=(e,t)=>e===t,y=e=>e(),g=p(!1),v=p(!0);class w{constructor(e,t){this.tag=e,this.value=t}static some(e){return new w(!0,e)}static none(){return w.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?w.some(e(this.value)):w.none()}bind(e){return this.tag?e(this.value):w.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:w.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return l(e)?w.some(e):w.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}w.singletonNone=new w(!1);const b=e=>parseInt(e,10),f=(e,t)=>{const r=e-t;return 0===r?0:r>0?1:-1},k=(e,t,r)=>({major:e,minor:t,patch:r}),x=e=>{const t=/([0-9]+)\.([0-9]+)\.([0-9]+)(?:(\-.+)?)/.exec(e);return t?k(b(t[1]),b(t[2]),b(t[3])):k(0,0,0)},A=Array.prototype.slice,T=Array.prototype.indexOf,C=Array.prototype.push,D=(e,t)=>((e,t)=>T.call(e,t))(e,t)>-1,I=(e,t)=>{for(let r=0,a=e.length;r<a;r++)if(t(e[r],r))return!0;return!1},_=(e,t)=>{const r=e.length,a=new Array(r);for(let o=0;o<r;o++){const r=e[o];a[o]=t(r,o)}return a},N=(e,t)=>{for(let r=0,a=e.length;r<a;r++)t(e[r],r)},S=(e,t)=>{const r=[];for(let a=0,o=e.length;a<o;a++){const o=e[a];t(o,a)&&r.push(o)}return r},M=(e,t,r)=>(N(e,((e,a)=>{r=t(r,e,a)})),r),O=(e,t,r)=>{for(let a=0,o=e.length;a<o;a++){const o=e[a];if(t(o,a))return w.some(o);if(r(o,a))break}return w.none()},E=(e,t)=>O(e,t,g),R=(e,t)=>(e=>{const t=[];for(let r=0,a=e.length;r<a;++r){if(!n(e[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+e);C.apply(t,e[r])}return t})(_(e,t)),W=e=>{const t=A.call(e,0);return t.reverse(),t},H=p("html4"),q=p("html5"),$=p("a"),G=p("aa"),P=p("aaa"),L=e=>t=>t.options.get(e),j=L("a11ychecker_css_url"),B=L("a11ychecker_level"),V=L("a11ychecker_html_version"),F=L("a11ychecker_issue_url_callback"),z=L("a11ychecker_filter_issue"),U=e=>{var t;return null!==(t=e.options.get("a11ychecker_allow_decorative_images"))&&void 0!==t?t:e.options.get("a11y_advanced_options")},K=tinymce.util.I18n,J={"a11y.d1.description":"This paragraph looks like a heading. If it is a heading, please select a heading level.","a11y.d1.repair.block.h1":"Heading 1","a11y.d1.repair.block.h2":"Heading 2","a11y.d1.repair.block.h3":"Heading 3","a11y.d1.repair.block.h4":"Heading 4","a11y.d1.repair.block.h5":"Heading 5","a11y.d1.repair.block.h6":"Heading 6","a11y.d1.repair.info":"Select a heading level:","a11y.d2.description":"Headings must be applied in sequential order. For example: Heading 1 should be followed by Heading 2, not Heading 3.","a11y.d3.description":"Adjacent links with the same URL should be merged into one link","a11y.d4.description":"The selected text appears to be a list. Lists should be formatted using a list tag.","a11y.d5a.description":"Large text must have a contrast ratio of at least 3:1","a11y.d5b.description":"Text must have a contrast ratio of at least 4.5:1","a11y.d5c.description":"Text must have a contrast ratio of at least 7:1","a11y.h93.description":"ID attribute must be unique","a11y.h93.repair.info":"Make ID unique","a11y.h93.repair.deduplicate.others":"Keep this ID and remove all others","a11y.h93.repair.deduplicate.this":"Remove this ID","a11y.h93.repair.deduplicate.all":"Remove all IDs","a11y.i1.description.decorativeAllowed":"Images must be marked as decorative or have an alternative text description","a11y.i1.description.decorativeNotAllowed":"Images must have an alternative text description. Decorative images are not allowed.","a11y.i1.repair.errors.duplicate":"Alternative text cannot be the same as the filename","a11y.i1.repair.errors.empty":"Alternative text cannot be empty","a11y.i1.repair.info.decorativeAllowed":"Or provide alternative text:","a11y.i1.repair.info.decorativeNotAllowed":"Provide alternative text:","a11y.i1.repair.checkboxlabel":"Make image decorative:","a11y.i1.repair.checkboxtext":"Image is decorative","a11y.i2.description":"Alternative text must not be the same as the image filename","a11y.i2.repair.info":"Provide alternative text:","a11y.i3.description":"Image alternative text should be less than 100 characters","a11y.i3.repair.error":"Alternative text is {0} characters","a11y.t1.description":"Tables must have captions","a11y.t1.repair.errors.duplicate":"Table caption cannot be the same as the table summary","a11y.t1.repair.errors.empty":"Caption cannot be empty","a11y.t1.repair.info":"Provide caption:","a11y.t2.description":"Complex tables should have summaries","a11y.t2.repair.errors.duplicate":"Table summary cannot be the same as the table caption","a11y.t2.repair.errors.empty":"Summary cannot be empty","a11y.t2.repair.info":"Provide table summary:","a11y.t3.description":"Table caption and summary cannot have the same value","a11y.t4a.description":"Table elements must contain TR and TD tags","a11y.t4b.description":"Tables must have at least one header cell","a11y.t4b.repair.info":"Choose table header:","a11y.t4c.description":"Table headers must be applied to a row or a column","a11y.t4c.repair.header.col":"Header column","a11y.t4c.repair.header.row":"Header row","a11y.t4c.repair.info":"Select header scope:","a11y.t4c.repair.scope.col":"Column","a11y.t4c.repair.scope.colgroup":"Column group","a11y.t4c.repair.scope.row":"Row","a11y.t4c.repair.scope.rowgroup":"Row group","a11y.widget.counter":"Issue {0} of {1}","a11y.widget.ignore":"Ignore","a11y.widget.issue.none":"No accessibility issues detected","a11y.widget.next":"Next issue","a11y.widget.previous":"Previous issue","a11y.widget.legacyrepair":"Repair issue","a11y.widget.repair":"Repair","a11y.widget.title":"Accessibility Checker","a11y.widget.help.title":"Click for more info","a11y.control.tooltip":"Accessibility checker","a11y.control.menutext":"Accessibility checker...",error:"Error",warning:"Warning",info:"Info",success:"Success"},Q=e=>J[e],X=e=>Array.isArray(e)?K.translate([Q(e[0]),...e.slice(1)]):K.translate(Q(e)),Y=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},Z=(e,t)=>{const r=(t||document).createElement(e);return Y(r)},ee=Y,te=(e,t)=>{const r=e.dom;if(1!==r.nodeType)return!1;{const e=r;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},re=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,ae=(e,t,r)=>R(t,(t=>"I1"===t.id?t.check(e,r)?[{rule:t,element:e}]:[]:t.check(e)?[{rule:t,element:e}]:[])),oe=(e,t)=>{let r=[];const a=((e,t)=>{const r=[],a=[];for(let t=0,n=e.length;t<n;t++){const n=e[t];(o=n,o.walkable?r:a).push(n)}var o;return{pass:r,fail:a}})(t.rules),o=s(t.ignoreSelectors)?[]:t.ignoreSelectors,n=a.pass,i=a.fail,l=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null);for(;l.nextNode();)if(!I(o,(e=>te(ee(l.currentNode),e)))){const e=ae(l.currentNode,n,t.allowDecorativeImages);r=r.concat(e)}const c=((e,t)=>R(t,(t=>_(t.check(e),(e=>({rule:t,element:e}))))))(e,i);return r=r.concat(c),r.sort(((e,t)=>((e,t)=>e===t?0:((e,t)=>((e,t,r)=>0!=(e.compareDocumentPosition(t)&r))(e,t,Node.DOCUMENT_POSITION_PRECEDING))(e,t)?1:-1)(e.element,t.element))),r},ne=(e,t)=>e.dom===t.dom,ie="undefined"!=typeof window?window:Function("return this;")(),se=(e,t)=>((e,t)=>{let r=null!=t?t:ie;for(let t=0;t<e.length&&null!=r;++t)r=r[e[t]];return r})(e.split("."),t),le=Object.getPrototypeOf,ce=e=>{const t=se("ownerDocument.defaultView",e);return o(e)&&((e=>((e,t)=>{const r=((e,t)=>se(e,t))(e,t);if(null==r)throw new Error(e+" not available on this browser");return r})("HTMLElement",e))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(le(e).constructor.name))},ue=e=>t=>(e=>e.dom.nodeType)(t)===e,de=e=>pe(e)&&ce(e.dom),pe=ue(1),he=ue(3),me=ue(9),ye=ue(11),ge=e=>t=>pe(t)&&t.dom.nodeName.toLowerCase()===e,ve=e=>ee(e.dom.ownerDocument),we=e=>w.from(e.dom.parentNode).map(ee),be=e=>w.from(e.dom.previousSibling).map(ee),fe=e=>W(((e,t)=>{const r=[],a=e=>(r.push(e),t(e));let o=t(e);do{o=o.bind(a)}while(o.isSome());return r})(e,be)),ke=e=>_(e.dom.childNodes,ee),xe=c(Element.prototype.attachShadow)&&c(Node.prototype.getRootNode)?e=>ee(e.dom.getRootNode()):e=>me(e)?e:ve(e),Ae=e=>ee(e.dom.host),Te=e=>{const t=he(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const r=t.ownerDocument;return(e=>{const t=xe(e);return ye(r=t)&&l(r.dom.host)?w.some(t):w.none();var r})(ee(t)).fold((()=>r.body.contains(t)),(a=Te,o=Ae,e=>a(o(e))));var a,o},Ce=e=>{const t=e.dom.body;if(null==t)throw new Error("Body is not available yet");return ee(t)},De=(e,t)=>E(e.dom.childNodes,(e=>t(ee(e)))).map(ee),Ie=(e,t)=>De(e,(e=>te(e,t))),_e=(e,t)=>((e,t)=>{const r=void 0===t?document:t.dom;return re(r)?w.none():w.from(r.querySelector(e)).map(ee)})(t,e),Ne=p("error"),Se=p("warning"),Me=(e,t)=>{const r=e;return r.matches?r.matches(t):r.webkitMatchesSelector?r.webkitMatchesSelector(t):r.mozMatchesSelector?r.mozMatchesSelector(t):!!r.msMatchesSelector&&r.msMatchesSelector(t)},Oe=e=>e.length>0,Ee=((e,t)=>{const r=t=>e(t)?w.from(t.dom.nodeValue):w.none();return{get:t=>{if(!e(t))throw new Error("Can only get text value of a text node");return r(t).getOr("")},getOption:r,set:(t,r)=>{if(!e(t))throw new Error("Can only set raw text value of a text node");t.dom.nodeValue=r}}})(he),Re=e=>Ee.get(e),We=e=>He(e).isSome(),He=e=>De(e,(e=>he(e)&&Oe(Re(e).trim()))),qe="strong,b",$e=(e,t)=>{return(r=e,a=qe,o=e=>ne(e,t),((e,t,r)=>{let o=e.dom;const n=c(r)?r:g;for(;o.parentNode;){o=o.parentNode;const e=ee(o);if(te(e,a))return w.some(e);if(n(e))break}return w.none()})(r,0,o)).isSome();var r,a,o},Ge=(e,t)=>He(e).fold((()=>((e,t)=>{for(let r=0,a=e.length;r<a;++r)if(!0!==t(e[r]))return!1;return!0})(ke(e),(e=>Ge(e,t)))),(e=>$e(e,t))),Pe={id:"D1",wcag:"1.3.1",severity:Se(),desckey:"a11y.d1.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H42.html",walkable:!0,check:e=>{const t=ee(e);return!(!Me(e,"p")||(r=t,qe,!_e(r,"strong,b").isSome()))&&Ge(t,t);var r},levels:[$(),G(),P()],htmlversions:[H(),q()]},Le={id:"D2",wcag:"1.3.1",severity:Ne(),desckey:"a11y.d2.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/general/G141.html",walkable:!1,check:e=>{const t=e.querySelectorAll("h1, h2, h3, h4, h5, h6");let r;const a=[];return N(t,(e=>{const t=parseInt(e.tagName.slice(1),10);r&&t-r>1&&a.push(e),r=t})),a},levels:[$(),G(),P()],htmlversions:[H(),q()]},je=(e,t)=>((e,r)=>S(ke(e),(e=>te(e,t))))(e),Be=(e,t)=>((e,t)=>{const r=void 0===t?document:t.dom;return re(r)?[]:_(r.querySelectorAll(e),ee)})(t,e),Ve={id:"D3",wcag:"2.4.4",severity:Ne(),desckey:"a11y.d3.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H2.html",walkable:!1,check:e=>{const t=ee(e),r=Be(t,"a + a"),a=S(r,(e=>{const t=W(fe(e));return O(t,ge("a"),(e=>{return!(he(t=e)&&(r=Re(t).replace(/[\u200B-\u200D\uFEFF]/g,""),!Oe(r)));var t,r})).exists((t=>t.dom.href===e.dom.href))}));return _(a,(e=>e.dom))},levels:[$(),G(),P()],htmlversions:[H(),q()]},Fe=(e,t)=>{const r=e.nodeName,a=((e,t)=>{let r=e.nextSibling;for(;null!==r&&(t&&"#text"===r.nodeName||"BR"===r.nodeName);)r=r.nextSibling;return r})(e,t);return null!==a&&a.nodeName===r&&a},ze=(e,t,r)=>{const a=[];if(t(e)){a.push(e);let o=Fe(e,r);for(;!1!==o&&t(o);)a.push(o),o=Fe(o,r)}return a},Ue=(e,t)=>{let r=-1;for(let a=0;a<e.length;a++)if(e[a]===t){r=a;break}return r},Ke=(e,t)=>{const r=e.querySelectorAll("p,h1,h2,h3,h4,h5,h6"),a=[];let o=0;for(;o<r.length;){const e=r[o],n=ze(e,t,!0);if(n.length>1){a.push(e);const t=n[n.length-1],i=Ue(r,t);o=-1===i?o+1:i}else l(e.firstChild)?(ze(e.firstChild,t,!1).length>1&&a.push(e),o++):o++}return a},Je=e=>{var t;return l(null===(t=e.textContent)||void 0===t?void 0:t.match(/^\s{0,}([a-z1-9]|i+)\s{0,}[.)-]/gim))},Qe={id:"D4o",wcag:"1.3.1",severity:Ne(),desckey:"a11y.d4.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H48.html",walkable:!1,check:e=>Ke(e,Je),levels:[$(),G(),P()],htmlversions:[H(),q()]},Xe=e=>{var t;return l(null===(t=e.textContent)||void 0===t?void 0:t.match(/^\s{0,}(\*|-)\s{0,}/gim))},Ye={id:"D4u",wcag:"1.3.1",severity:Ne(),desckey:"a11y.d4.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H48.html",walkable:!1,check:e=>Ke(e,Xe),levels:[$(),G(),P()],htmlversions:[H(),q()]},Ze=Object.keys,et=Object.hasOwnProperty,tt=(e,t)=>{const r=Ze(e);for(let a=0,o=r.length;a<o;a++){const o=r[a];t(e[o],o)}},rt=e=>(t,r)=>{e[r]=t},at=(e,t)=>et.call(e,t),ot=(e,t,r)=>{((e,t,r)=>{if(!(a(r)||i(r)||u(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")})(e.dom,t,r)},nt=(e,t)=>{const r=e.dom.getAttribute(t);return null===r?void 0:r},it=(e,t)=>w.from(nt(e,t)),st=(e,t)=>{e.dom.removeAttribute(t)},lt=(e,t)=>{const r=e.dom,a=window.getComputedStyle(r).getPropertyValue(t);return""!==a||Te(e)?a:ct(r,t)},ct=(e,t)=>(e=>void 0!==e.style&&c(e.style.getPropertyValue))(e)?e.style.getPropertyValue(t):"",ut=(e,t,r,a)=>({red:e,green:t,blue:r,alpha:a}),dt=e=>{const t=e=>e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),r=e.red/255,a=e.green/255,o=e.blue/255;return.2126*t(r)+.7152*t(a)+.0722*t(o)},pt=(e,t)=>{const r=e.alpha+t.alpha*(1-e.alpha),a=(e.red*e.alpha+t.red*t.alpha*(1-e.alpha))/r,o=(e.green*e.alpha+t.green*t.alpha*(1-e.alpha))/r,n=(e.blue*e.alpha+t.blue*t.alpha*(1-e.alpha))/r;return ut(Math.ceil(a),Math.ceil(o),Math.ceil(n),r)},ht=e=>{const t=(e,t,r,a)=>{const o=parseInt(e,10),n=parseInt(t,10),i=parseInt(r,10),s=parseFloat(a);return w.some(ut(o,n,i,s))};if("transparent"===e)return t("0","0","0","0");const r=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/.exec(e);if(null!==r)return t(r[1],r[2],r[3],"1");const a=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/.exec(e);return null!==a?t(a[1],a[2],a[3],a[4]):w.none()},mt=(e,t)=>{const r=parseFloat(lt(e,"opacity"));return r<1?ut(t.red,t.green,t.blue,t.alpha*r):t},yt=(e,t)=>gt(e).filter((e=>e<t)).isSome(),gt=e=>{const t=(e=>{const t=ve(e),r=Ce(t),a=[e].concat(((e,t)=>{const r=c(t)?t:g;let a=e.dom;const o=[];for(;null!==a.parentNode&&void 0!==a.parentNode;){const e=a.parentNode,t=ee(e);if(o.push(t),!0===r(t))break;a=e}return o})(e,(e=>ne(e,r)))),o=M(a,((e,t)=>{if(1===e.alpha)return e;const r=lt(t,"background-color");return ht(r).bind((r=>{const a=mt(t,r);return a.alpha>0?w.some(pt(e,a)):w.none()})).getOr(e)}),ut(0,0,0,0));return o.alpha<1?pt(o,ut(255,255,255,1)):o})(e);return((e,t)=>{const r=lt(e,"color");return ht(r).bind((r=>{const a=mt(e,r),o=a.alpha<1?pt(a,t):a;return w.some(o)}))})(e,t).map((e=>{const r=dt(t);return((e,t)=>(Math.max(e,t)+.05)/(Math.min(e,t)+.05))(dt(e),r)}))},vt={id:"D5c",wcag:"1.4.3",severity:Ne(),desckey:"a11y.d5c.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/general/G17.html",walkable:!0,check:e=>{const t=ee(e);return We(t)&&yt(t,7)},levels:[P()],htmlversions:[H(),q()]},wt=e=>{const t=lt(e,"font-size"),r=new RegExp(".*px").test(t),a=/(\d*\.?\d*)(.*)/.exec(t);return r&&null!==a?w.some(Number(a[1])):w.none()},bt=e=>{const t=(e=>{const t=lt(e,"font-weight");return!("bold"!==t&&"bolder"!==t)||!!/^[0-9]*$/.test(r=t)&&parseInt(r,10)>=700;var r})(e),r=ve(e),a=Ce(r),o=wt(a);return wt(e).fold(g,(e=>o.fold((()=>e>=24||t&&e>=19),(r=>e>=1.5*r||t&&e>=1.2*r))))},ft={id:"D5a",wcag:"1.4.3",severity:Ne(),desckey:"a11y.d5a.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/general/G145.html",walkable:!0,check:e=>{const t=ee(e);return We(t)&&bt(t)&&yt(t,3)},levels:[G()],htmlversions:[H(),q()]},kt={id:"D5b",wcag:"1.4.3",severity:Ne(),desckey:"a11y.d5b.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/general/G18.html",walkable:!0,check:e=>{const t=ee(e);return We(t)&&!bt(t)&&yt(t,4.5)},levels:[G()],htmlversions:[H(),q()]},xt={id:"H93",wcag:"4.1.1",severity:Ne(),desckey:"a11y.h93.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H93.html",walkable:!1,check:e=>{const t=ee(e),r=Be(t,"*[id]"),a=M(r,((e,t)=>{const r=nt(t,"id");if(void 0===r)return e;if(at(e.problems,r))return e;if(at(e.ids,r)){const t=e.ids[r];return{...e,problems:{...e.problems,[r]:t}}}return{...e,ids:{...e.ids,[r]:t.dom}}}),{ids:{},problems:{}});return((e,t)=>{const r=[];return tt(e,((e,a)=>{r.push(t(e,a))})),r})(a.problems,h)},levels:[$(),G(),P()],htmlversions:[H(),q()]},At=ge("img"),Tt={id:"I1",wcag:"1.1.1",severity:Ne(),desckey:"a11y.i1.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/general/G95.html",walkable:!0,check:(e,t)=>{const r=ee(e);if(!At(r))return!1;const a=it(r,"alt"),o=a.isSome(),n=a.exists((e=>""===e.trim())),i=((e,t,r=m)=>e.exists((e=>r(e,t))))(it(r,"role"),"presentation");return!o||(t?o&&n&&!i||o&&!n&&i:n||i)},levels:[$(),G(),P()],htmlversions:[H(),q()]},Ct={id:"I2",wcag:"1.1.1",severity:Ne(),desckey:"a11y.i2.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/general/G95.html",walkable:!0,check:e=>(e=>Me(e,"img[alt][src]"))(e)&&e.src.split("/").pop()===e.alt.split("/").pop(),levels:[$(),G(),P()],htmlversions:[H(),q()]},Dt={id:"I3",wcag:"N/A",severity:Se(),desckey:"a11y.i3.description",url:"",walkable:!0,check:e=>{const t=ee(e);return!!At(t)&&it(t,"alt").exists((e=>e.length>100))},levels:[$(),G(),P()],htmlversions:[H(),q()]},It={id:"T1",wcag:"1.3.1",severity:Ne(),desckey:"a11y.t1.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H39.html",walkable:!0,check:e=>{if(Me(e,"table")){const t=e.querySelector("caption");return!t||Me(t,":empty")}return!1},levels:[$(),G(),P()],htmlversions:[H(),q()]},_t={id:"T2",wcag:"1.3.1",severity:Se(),desckey:"a11y.t2.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H73.html",walkable:!0,check:e=>Me(e,"table")&&l(e.querySelector("[rowspan]")||e.querySelector("[colspan]"))&&!e.hasAttribute("summary"),levels:[$(),G(),P()],htmlversions:[H()]},Nt={id:"T3",wcag:"1.3.1",severity:Ne(),desckey:"a11y.t3.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H73.html",walkable:!0,check:e=>{if(Me(e,"table")&&e.hasAttribute("summary")){const t=e.querySelectorAll("caption");return t.length>0&&e.getAttribute("summary")===t[0].innerHTML}return!1},levels:[$(),G(),P()],htmlversions:[H(),q()]},St={id:"T4b",wcag:"1.3.1",severity:Ne(),desckey:"a11y.t4b.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H51.html",walkable:!0,check:e=>"table"===e.nodeName.toLowerCase()&&0===e.querySelectorAll("th").length,levels:[$(),G(),P()],htmlversions:[H(),q()]},Mt={id:"T4c",wcag:"1.3.1",severity:Ne(),desckey:"a11y.t4c.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H63.html",walkable:!0,check:e=>{return!("th"!==e.nodeName.toLowerCase()||(t=e).hasAttribute("scope")&&/row|col|rowgroup|colgroup/i.test(t.getAttribute("scope")));var t},levels:[$(),G(),P()],htmlversions:[H(),q()]},Ot=(e,t)=>0===e.querySelectorAll(t).length,Et={id:"T4a",wcag:"1.3.1",severity:Ne(),desckey:"a11y.t4a.description",url:"https://www.w3.org/WAI/WCAG21/Techniques/html/H51.html",walkable:!0,check:e=>{return"table"===e.nodeName.toLowerCase()&&(Ot(t=e,"tr")||Ot(t,"td"));var t},levels:[$(),G(),P()],htmlversions:[H(),q()]};var Rt={all:p([Pe,Le,Ve,Qe,Ye,ft,kt,vt,xt,Tt,Ct,Dt,It,_t,Nt,Mt,Et,St])};const Wt=(e=>{const t="ephox-foam".replace(/\./g,"-");return{resolve:e=>t+"-"+e}})().resolve,Ht=(e,t,r)=>{ot(e,t,r)},qt=(e,t,r)=>{st(e,t),st(e,r)},$t=e=>{const t=e.editor;return{start:t=>{((e,t,r,a,o,n)=>{N(e,(e=>{const r=((e,t,r,a)=>{switch(e){case"info":return w.some(t);case"warning":return w.some(r);case"error":return w.some(a);default:return w.none()}})(e.severity,a,o,n).toArray().concat([t]);N(r,(t=>{ot(e.element,t,1)}))})),w.from(e[0]).each((e=>{Ht(e.element,r,e.severity)}))})(t,e.violation,e.current,e.info,e.warn,e.error)},moveTo:(r,a)=>{((e,t,r,a)=>{const o=Be(e,"["+t+"]");N(o,(e=>{st(e,t)})),Ht(r,t,a)})(ee(t.getBody()),e.current,r,a)},stop:()=>{((e,t,r,a,o,n)=>{const i=Be(e,"["+t+"]");N(i,(e=>{N([t,r,a,o,n],(t=>{st(e,t)})),qt(e,t,r)}))})(ee(t.getBody()),e.violation,e.current,e.info,e.warn,e.error)},exclude:t=>{qt(t,e.violation,e.current)}}},Gt="data-"+Wt("a11y-current-violation"),Pt="data-"+Wt("a11y-violation"),Lt="data-"+Wt("a11y-severity-info"),jt="data-"+Wt("a11y-severity-warn"),Bt="data-"+Wt("a11y-severity-error"),Vt="data-"+Wt("accessibility-ignore"),Ft=p(Vt),zt=e=>({id:e.id.toUpperCase(),severity:e.severity,url:e.url,description:X(e.description),element:e.element.dom}),Ut=t=>{const r=(e=>{const t=(e=>{const t=e.options.get("a11ychecker_ignored_rules");return R(tinymce.explode(t),(e=>e.length>0?[e.toUpperCase()]:[]))})(e),r=B(e),a=V(e),o=Rt.all().slice();return{rules:S(o,(e=>!D(t,e.id.toUpperCase())&&D(e.levels,r)&&D(e.htmlversions,a))),allowDecorativeImages:U(e),ignoreSelectors:["img[data-mce-placeholder]","[data-mce-bogus=all] *","[data-mce-bogus]","[data-mce-mergetag-affix]"]}})(t);(e=>{e.on("init",(()=>{N([Vt,Pt,Lt,jt,Bt,Gt],(t=>{e.serializer.addTempAttr(t)}))}))})(t);const a=e(!1),o=(e=>({audit:t=>oe(t,e)}))(r),n=(e=>$t({editor:e,violation:Pt,current:Gt,info:Lt,warn:jt,error:Bt}))(t),i=Ft();let s=[],l=0;const c=()=>{const e=o.audit(t.getBody()),r=((e,t)=>_(t,(t=>{const r=t.rule;return{id:r.id.toUpperCase(),description:"I1"!==r.id?r.desckey:U(e)?`${r.desckey}.decorativeAllowed`:`${r.desckey}.decorativeNotAllowed`,element:ee(t.element),url:r.url,severity:r.severity}})))(t,e);return S(r,(e=>{const r=(o=e.element,it(o,i).map((e=>e.split(" "))).getOr([])),a=z(t);var o;return!D(r,e.id)&&a(zt(e))}))},u=e=>(l+=e,l=l<0?l+s.length:l%s.length,n.moveTo(s[l].element,s[l].severity),t.selection.scrollIntoView(s[l].element.dom),{summaryLabel:X(["a11y.widget.counter",l+1,s.length]),issue:s[l],index:l+1}),d=()=>s.length>0?w.some(u(0)):w.none(),p=()=>{a.set(!0),s=c(),l=0},h=()=>{n.stop(),a.set(!1),l=0,s=[]};return{scan:()=>(p(),n.start(s),d()),stepIssue:u,getIssues:()=>s.slice(0),getCurrent:d,getReport:()=>{const e=a.get();try{return e||p(),_(s,zt)}finally{e||h()}},resolveCurrent:e=>(e&&((e,t,r)=>{const a=it(e,t).map((e=>e.concat(" ",r))).getOr(r);ot(e,t,a)})(s[l].element,i,s[l].id),s=c(),d()),clear:h,isAuditing:()=>a.get()}},Kt=(e,t)=>{const r=t.ui.registry.getAll().icons;return w.from(r[e]).orThunk((()=>w.from(r["temporary-placeholder"]))).getOr("!not found!")},Jt={success:"checkmark",info:"info",warning:"notice",error:"warning"},Qt=(e,t,r,a,o)=>{const n=X(r),i=X(t);return`<div class="accessibility-issue__description"><div><div><div class="tox-icon">${Kt(Jt[r],e)}</div><h2>${n}</h2></div><p>${i}</p></div><div>`+((e,t,r)=>{const a=`<a href="${r}" title="${X("a11y.widget.help.title")}" class="tox-button tox-button--naked tox-button--icon" target="_blank" data-alloy-tabstop="true" tabindex="-1"><div class="tox-icon">${Kt(e,t)}</div></a>`;return"help"===e?a:`<div class="tox-icon">${Kt(e,t)}</div>`})(a,e,o)+"</div></div>"},Xt=(e,t,r,a)=>({type:"selectbox",label:t,name:e,items:_(r,(e=>({text:a(e.text),value:e.value})))}),Yt=(e,t)=>({type:"input",name:e,label:t}),Zt=(e,t,r)=>({type:"label",label:t,items:[{type:"checkbox",name:e,label:r}]}),er=(e,t)=>({title:X("a11y.widget.title"),body:{type:"panel",items:[{type:"panel",classes:["tox-accessibility-issue","accessibility-issue--success"],items:[{type:"htmlpanel",html:Qt(e,"a11y.widget.issue.none","success","checkmark"),presets:"presentation"}]}]},buttons:[{type:"submit",name:"ok",text:"OK",primary:!0}],onSubmit:e=>e.close(),onClose:t}),tr=(e,t,r)=>{e.redial(t),e.focus(r)};var rr;!function(e){e.Next="next",e.Prev="prev",e.Ignore="ignore",e.Ok="ok",e.Repair="repair"}(rr||(rr={}));const ar=({issue:e,summaryLabel:t},r,a,o,n,i)=>{const s=F(n),l=e=>ar(e,r,a,w.none(),n,i),c=o=>(s,{name:c})=>{if(c===rr.Next||c===rr.Prev){const e=r.stepIssue(c===rr.Next?1:-1);tr(s,l(e),c)}else c===rr.Ignore?r.resolveCurrent(!0).fold((()=>tr(s,er(n,i),rr.Ok)),(e=>tr(s,l(e),rr.Ignore))):c===rr.Repair&&((o,s)=>{const c=s=>{tr(o,ar({issue:e,summaryLabel:t},r,a,w.some(s),n,i),rr.Repair)},u=()=>r.resolveCurrent(!1).fold((()=>r.scan().fold((()=>tr(o,er(n,i),rr.Ok)),(e=>tr(o,l(e),rr.Ignore)))),(e=>tr(o,l(e),rr.Ignore)));s.each((t=>{t.repair(e.element,e.id,((e,t)=>{const r={},a={};return((e,t,r,a)=>{tt(e,((e,o)=>{(t(e,o)?r:a)(e,o)}))})(e,t,rt(r),rt(a)),{t:r,f:a}})(o.getData(),((t,r)=>{return a=r,""===(o=e.id)||a.length>=o.length&&a.substr(0,0+o.length)===o;var a,o})).t,(e=>e.fold(c,u)))}))})(s,o)},u=t=>r=>t.each((t=>{t.onChange.each((t=>t(r,r.getData(),e))),t.shouldDisableRepair.each((t=>{const a=t(r.getData(),e);r.setEnabled(rr.Repair,!a)}))})),d=(r,a,o)=>{const l="warning"===(d=e.severity)?"warn":d;var d;const p=a.map((()=>({type:"panel",classes:["accessibility-issue__repair"],items:a.map((e=>e.items)).getOr([])}))).toArray();return{title:X("a11y.widget.title"),body:{type:"panel",classes:["tox-accessibility-issue",`accessibility-issue--${l}`],items:[{type:"panel",classes:["accessibility-issue__header"],items:[{type:"htmlpanel",html:`<h1>${t}</h1>`,presets:"presentation"},{type:"button",name:rr.Prev,text:X("a11y.widget.previous"),icon:"action-prev",borderless:!0},{type:"button",name:rr.Next,text:X("a11y.widget.next"),icon:"action-next",borderless:!0}]},{type:"htmlpanel",html:Qt(n,e.description,e.severity,"help",s(e.id)),presets:"presentation"},...p]},buttons:[{type:"custom",name:rr.Ignore,text:X("a11y.widget.ignore")},{type:"custom",name:rr.Repair,text:X("a11y.widget.repair"),enabled:!o,primary:!0}],initialData:{...a.map((e=>e.initialData)).getOr({})},onAction:c(r),onChange:u(r),onClose:i}};return a(e.id).fold((()=>d(w.none(),w.none(),!0)),(t=>{const r=((e,t,r)=>{const a=t.element;return r.fold((()=>e.ui.map((e=>e(t.id,a)))),(r=>e.ui.map((e=>{const o=e(t.id,a);return{items:o.items.concat([(n=r.errorMessage,{type:"htmlpanel",html:`<div class="tox-form__group--error">${n}</div>`})]),initialData:{...o.initialData,...r.repairErrorData}};var n}))))})(t,e,o),a=t.shouldDisableRepair.bind((t=>r.map((r=>t(r.initialData,e))))).getOr(!1);return d(w.some(t),r,a)}))},or=(e,t)=>{we(e).each((r=>{r.dom.insertBefore(t.dom,e.dom)}))},nr=(e,t)=>{const r=(e=>w.from(e.dom.nextSibling).map(ee))(e);r.fold((()=>{we(e).each((e=>{ir(e,t)}))}),(e=>{or(e,t)}))},ir=(e,t)=>{e.dom.appendChild(t.dom)},sr=(e,t)=>{N(t,(t=>{ir(e,t)}))},lr=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},cr=e=>{const t=ke(e);var r,a;t.length>0&&(r=e,N(a=t,((e,t)=>{const o=0===t?r:a[t-1];nr(o,e)}))),lr(e)},ur=e=>e.dom.innerHTML,dr=e=>{const t=t=>t(e),r=p(e),a=()=>o,o={tag:!0,inner:e,fold:(t,r)=>r(e),isValue:v,isError:g,map:t=>hr.value(t(e)),mapError:a,bind:t,exists:t,forall:t,getOr:r,or:a,getOrThunk:r,orThunk:a,getOrDie:r,each:t=>{t(e)},toOptional:()=>w.some(e)};return o},pr=e=>{const t=()=>r,r={tag:!1,inner:e,fold:(t,r)=>t(e),isValue:g,isError:v,map:t,mapError:t=>hr.error(t(e)),bind:t,exists:g,forall:v,getOr:h,or:h,getOrThunk:y,orThunk:y,getOrDie:(a=String(e),()=>{throw new Error(a)}),each:d,toOptional:w.none};var a;return r},hr={value:dr,error:pr,fromOption:(e,t)=>e.fold((()=>pr(t)),dr)},mr=e=>((e,t)=>ee(e.dom.cloneNode(!0)))(e),yr=(e,t,r)=>hr.error({errorMessage:t(e),repairErrorData:r}),gr=(e,t,r,a,o,n)=>0===t.length?yr(a,n,{}):vr(e,t,r,o,n),vr=(e,t,r,a,o)=>t===r?yr(a,o,{}):hr.value(e),wr=e=>{const t=e.split("/");return w.from(t.pop())},br=(e,t,r,a,o,n)=>{const i=it(e,"src").bind(wr).getOr(""),s=r[`${t}_textinput`];return r[`${t}_checkbox`]?(e=>(ot(e,"alt",""),ot(e,"role","presentation"),hr.value(e)))(e):gr(e,s,i,a,o,n).map((e=>(ot(e,"alt",s),"presentation"===nt(e,"role")&&st(e,"role"),e)))},fr=e=>e.dom.textContent,kr=(e,t,r,a,o,n)=>{const i=nt(e,"summary");return gr(e,r[t],i,a,o,n).map((a=>{const o=Ie(e,"caption").fold((()=>Z("caption")),(e=>{var t;return(t=e).dom.textContent="",N(ke(t),(e=>{lr(e)})),e}));return((e,t)=>{e.dom.textContent=t})(o,r[t]),((e,t)=>{(e=>((e,t)=>{const r=e.dom.childNodes;return w.from(r[0]).map(ee)})(e))(e).fold((()=>{ir(e,t)}),(r=>{e.dom.insertBefore(t.dom,r.dom)}))})(a,o),a}))},xr=e=>`${e}_checkbox`,Ar=e=>`${e}_textinput`,Tr=(e,t)=>{const r=t.id,a=!0===e[xr(r)],o=e[Ar(r)].length>0;return!a&&!o},Cr=(e,t,r)=>{const a=r.id,o=xr(a),n=Ar(a);!0===t[o]?(e.setEnabled(n,!1),e.setEnabled(rr.Repair,!0)):(e.setEnabled(n,!0),t[n].length>0?(e.setEnabled(rr.Repair,!0),e.setEnabled(o,!0)):(e.setEnabled(o,!0),e.setEnabled(rr.Repair,!1)))},Dr=(e,t)=>{const r=Yt(Ar(t),X((a="a11y.i1.repair.info",e?`${a}.decorativeAllowed`:`${a}.decorativeNotAllowed`)));var a;return e?[Zt(xr(t),X("a11y.i1.repair.checkboxlabel"),X("a11y.i1.repair.checkboxtext")),r]:[r]},Ir=(e,t,r)=>{const a=nt(e,"alt"),o=t?{[xr(r)]:!1}:{};return{[Ar(r)]:a||"",...o}},_r=e=>{const t=U(e),r={H93:w.some({ui:w.some(((e,t)=>({items:[Xt(e,X("a11y.h93.repair.info"),[{text:"a11y.h93.repair.deduplicate.others",value:"others"},{text:"a11y.h93.repair.deduplicate.this",value:"this"},{text:"a11y.h93.repair.deduplicate.all",value:"all"}],X)],initialData:{[e]:""}}))),repair:(t,r,a,o)=>{e.undoManager.transact((()=>{o(((e,t,r,a)=>{const o=r[t],n="all"===o||"this"===o;if("all"===o||"others"===o){const t=nt(e,"id"),r=a.getBody(),o=ee(r),n=Be(o,`*[id="${t}"]`),i=S(n,(t=>!ne(t,e)));N(i,(e=>{st(e,"id")}))}return n&&st(e,"id"),hr.value(e)})(t,r,a,e))}))},shouldDisableRepair:w.none(),onChange:w.none()}),I1:w.some({ui:w.some(((e,r)=>({items:Dr(t,e),initialData:Ir(r,t,e)}))),repair:(t,r,a,o)=>{e.undoManager.transact((()=>{o(br(t,r,a,"a11y.i1.repair.errors.empty","a11y.i1.repair.errors.duplicate",X))}))},shouldDisableRepair:t?w.some(Tr):w.none(),onChange:t?w.some(Cr):w.none()}),I2:w.some({ui:w.some(((e,r)=>({items:Dr(t,e),initialData:Ir(r,t,e)}))),repair:(t,r,a,o)=>{e.undoManager.transact((()=>{o(br(t,r,a,"a11y.i1.repair.errors.empty","a11y.i1.repair.errors.duplicate",X))}))},shouldDisableRepair:t?w.some(Tr):w.none(),onChange:t?w.some(Cr):w.none()}),I3:w.some({ui:w.some(((e,t)=>({items:Dr(!1,e),initialData:Ir(t,!1,e)}))),repair:(t,r,a,o)=>{e.undoManager.transact((()=>{o(((e,t,r,a,o)=>{const n=r[`${t}_textinput`];return((e,t,r,a,o,n=100)=>{const i=`${t}_textinput`;return r.length>n?yr([a,r.length],o,{[i]:r}):hr.value(e)})(e,t,n,a,o,100).map((e=>(ot(e,"alt",n),e)))})(t,r,a,"a11y.i3.repair.error",X))}))},shouldDisableRepair:w.none(),onChange:w.none()}),T1:w.some({ui:w.some(((e,t)=>({items:[Yt(e,X("a11y.t1.repair.info"))],initialData:{[e]:""}}))),repair:(t,r,a,o)=>{e.undoManager.transact((()=>{o(kr(t,r,a,"a11y.t1.repair.errors.empty","a11y.t1.repair.errors.duplicate",X))}))},shouldDisableRepair:w.none(),onChange:w.none()}),T2:w.some({ui:w.some(((e,t)=>({items:[Yt(e,X("a11y.t2.repair.info"))],initialData:{[e]:""}}))),repair:(t,r,a,o)=>{e.undoManager.transact((()=>{o(((e,t,r,a,o,n)=>{const i=_e(e,"caption").filter(de).map(fr).getOr("");return gr(e,r[t],i,"a11y.t2.repair.errors.empty","a11y.t2.repair.errors.duplicate",n).map((a=>(ot(e,"summary",r[t]),a)))})(t,r,a,0,0,X))}))},shouldDisableRepair:w.none(),onChange:w.none()}),T3:w.some({ui:w.some(((e,t)=>{const r=Ie(t,"caption").fold(p(""),ur);return{items:[Yt(e,X("a11y.t1.repair.info"))],initialData:{[e]:r}}})),repair:(t,r,a,o)=>{e.undoManager.transact((()=>{o(kr(t,r,a,"a11y.t1.repair.errors.empty","a11y.t1.repair.errors.duplicate",X))}))},shouldDisableRepair:w.none(),onChange:w.none()}),T4A:w.none(),T4B:w.some({ui:w.some(((e,t)=>({items:[Xt(e,X("a11y.t4b.repair.info"),[{text:"a11y.t4c.repair.header.row",value:"row"},{text:"a11y.t4c.repair.header.col",value:"col"}],X)],initialData:{[e]:""}}))),repair:(t,r,a,o)=>{e.undoManager.transact((()=>{o(((e,t,r)=>{let a=[];if("row"===r[t]){const t=ee(e.dom.rows[0]);a=je(t,"td")}else"col"===r[t]&&N(e.dom.rows,(e=>{Ie(ee(e),"td").each((e=>{a.push(e)}))}));return N(a,(e=>{const t=Z("th");N(e.dom.attributes,(r=>{it(e,r.name).each((e=>ot(t,r.name,e)))})),t.dom.innerHTML=e.dom.innerHTML,nr(e,t),lr(e)})),hr.value(e)})(t,r,a))}))},shouldDisableRepair:w.none(),onChange:w.none()}),T4C:w.some({ui:w.some(((e,t)=>({items:[Xt(e,X("a11y.t4c.repair.info"),[{text:"a11y.t4c.repair.scope.row",value:"row"},{text:"a11y.t4c.repair.scope.col",value:"col"},{text:"a11y.t4c.repair.scope.rowgroup",value:"rowgroup"},{text:"a11y.t4c.repair.scope.colgroup",value:"colgroup"}],X)],initialData:{[e]:""}}))),repair:(t,r,a,o)=>{e.undoManager.transact((()=>{o(((e,t,r)=>(ot(e,"scope",r[t]),hr.value(e)))(t,r,a))}))},shouldDisableRepair:w.none(),onChange:w.none()}),D1:w.some({ui:w.some(((e,t)=>({items:[Xt(e,X("a11y.d1.repair.info"),[{text:"a11y.d1.repair.block.h1",value:"h1"},{text:"a11y.d1.repair.block.h2",value:"h2"},{text:"a11y.d1.repair.block.h3",value:"h3"},{text:"a11y.d1.repair.block.h4",value:"h4"},{text:"a11y.d1.repair.block.h5",value:"h5"},{text:"a11y.d1.repair.block.h6",value:"h6"}],X)],initialData:{[e]:""}}))),repair:(t,r,a,o)=>{e.undoManager.transact((()=>{o(((e,t,r)=>{const a=ve(e),o=Z(r[t],a.dom),n=ke(e),i=_(n,mr);sr(o,i);const s=Be(o,"b,strong");return N(s,cr),or(e,o),lr(e),hr.value(o)})(t,r,a))}))},shouldDisableRepair:w.none(),onChange:w.none()}),D2:w.none(),D3:w.some({ui:w.none(),repair:(t,r,a,o)=>{e.undoManager.transact((()=>{o((e=>{const t=W(fe(e));return E(t,ge("a")).fold((()=>hr.error({errorMessage:"Failed to find previous link",repairErrorData:{}})),(r=>{for(const e of t){if(ne(e,r))break;he(e)&&lr(e)}const a=ke(e);return sr(r,a),lr(e),hr.value(r)}))})(t))}))},shouldDisableRepair:w.none(),onChange:w.none()})};return e=>r.hasOwnProperty(e)?r[e]:w.none()},Nr=(t,r)=>{const a=(()=>{const t=(t=>{const r=e(w.none()),a=()=>r.get().each(t);return{clear:()=>{a(),r.set(w.none())},isSet:()=>r.get().isSome(),get:()=>r.get(),set:e=>{a(),r.set(w.some(e))}}})(d);return{...t,on:e=>t.get().each(e)}})(),o=()=>{a.clear(),r.clear()},n=()=>{const e=((e,t,r,a,o)=>t.scan().fold((()=>e(er(a,o))),(n=>e(ar(n,t,r,w.none(),a,o)))))((e=>t.windowManager.open(e,{inline:"toolbar",ariaAttrs:!0})),r,_r(t),t,o);a.set(e)},i=e=>e.close();return t.ui.registry.addButton("a11ycheck",{tooltip:X("a11y.control.tooltip"),icon:"accessibility-check",onAction:n}),t.ui.registry.addMenuItem("a11ycheck",{icon:"accessibility-check",text:X("a11y.control.menutext"),onAction:n}),()=>a.get().fold(n,i)};tinymce.PluginManager.requireLangPack("a11ychecker","ar,bg_BG,ca,cs,da,de,el,es,eu,fa,fi,fr_FR,he_IL,hi,hr,hu_HU,id,it,ja,kk,ko_KR,ms,nb_NO,nl,pl,pt_PT,pt_BR,ro,ru,sk,sl_SI,sv_SE,th_TH,tr,uk,vi,zh_TW,zh_CN"),tinymce.PluginManager.add("a11ychecker",((e,t)=>{if(((e,t)=>!!e&&-1===((e,t)=>{const r=f(e.major,t.major);if(0!==r)return r;const a=f(e.minor,t.minor);if(0!==a)return a;const o=f(e.patch,t.patch);return 0!==o?o:0})((e=>x((e=>[e.majorVersion,e.minorVersion].join(".").split(".").slice(0,3).join("."))(e)))(e),x(t)))(tinymce,"6.3.0"))return console.error('The "a11ychecker" plugin requires at least version 6.3.0 of TinyMCE.'),{};((e,t)=>{const r=e.options.register;r("a11ychecker_css_url",{processor:"string",default:t+"/css/annotations.css"}),r("a11ychecker_allow_decorative_images",{processor:"boolean"});const o=[$(),G(),P()];r("a11ychecker_level",{processor:e=>a(e)&&D(o,e),default:G()});const n=[H(),q()];r("a11ychecker_html_version",{processor:e=>a(e)&&D(n,e),default:q()}),r("a11ychecker_issue_url_callback",{processor:"function",default:e=>`https://www.tiny.cloud/docs/tinymce/${tinymce.majorVersion}/a11ychecker/#${e}`}),r("a11ychecker_ignored_rules",{processor:"string",default:""}),r("a11ychecker_filter_issue",{processor:"function",default:v})})(e,t);const r=Ut(e),o=j(e),n=Nr(e,r);return e.on("init",(()=>{e.dom.loadCSS(o)})),{getReport:r.getReport,toggleaudit:n}}))}();